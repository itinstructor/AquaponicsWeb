{% extends "base.html"%}
{% block content %}
<div class="container">

  <div class="mb-4">
    <h1 class="mb-2">🐟 WNCC STEM Club - Aquaponics System</h1>
    <p>The WNCC STEM Club meets every Thursday at 4 PM in Room C1.</p>
  </div>

  <!-- Fish Tank -->
  <div class="card mb-4">
    <div class="card-header">🐟 Fish Tank</div>
    <div class="card-body">
      <p class="mb-3">Live stream from the Aquaponics system fish tank in the Pit (Student common area).</p>
      <img id="fishStream" src="{{ fish_stream_url }}?t={{ timestamp }}" alt="Fish Tank Stream" class="img-fluid">
    </div>
  </div>

  <!-- Fish Names -->
  <div class="card mb-4">
    <div class="card-header">🐠 Fish Tank Inhabitants</div>
    <div class="card-body">
      <ul class="list-unstyled mb-0">
        <li><strong>Curiosity</strong> — Orange & white comet goldfish. Donor: Sarah Bartlett.</li>
        <li><strong>Jackson Pollock</strong> — Black & orange calico goldfish (named for his ever-changing patches).
        </li>
        <li><strong>Todd</strong> — Our oldest, largest goldfish; he speaks for himself.</li>
        <li><strong>Bump Rogers</strong> — Goldfish with fatty lumps (has had them long-term).</li>
        <li><strong>Frodo</strong> &amp; <strong>Sam</strong> — Our classic goldfish twins.</li>
        <li><strong>Chief Inspector Pleco</strong> — Black & white inspector pleco. (Thanks Bill)</li>
        <li><strong>Pablo Plec-caso</strong> — Albino bristlenose pleco.</li>
        <li><strong>Banksy</strong> — New baby fantail goldfish (still discovering his personality).</li>
        <li><strong>Lightning McQueen</strong> &amp; <strong>Mater</strong> — Our identical mystery snails.</li>
      </ul>
    </div>
  </div>

  <!-- Plants Bed -->
  <div class="card mb-4">
    <div class="card-header">🌱 Plant Bed</div>
    <div class="card-body">
      <p class="mb-3">Live stream from the Aquaponics plant bed. See how the plants are growing with
        nutrients from the fish waste!</p>
      <img id="plantsStream" src="{{ plants_stream_url }}?t={{ timestamp }}" alt="Plant Bed Stream" class="img-fluid">
    </div>
  </div>

  <!-- Latest Blog Posts -->
  {% if latest_posts and latest_posts|length > 0 %}
  <div class="card mb-4">
    <div class="card-header">📝 Latest Blog Posts</div>
    <div class="card-body">
      {% for post in latest_posts[:2] %}
      <div class="mb-4">
        <h5 class="card-title">{{ post.title }}</h5>
        <p class="small">
          <i class="bi bi-person"></i> {{ post.author.username if post.author else 'Unknown' }}
          <i class="bi bi-calendar ms-2"></i> {{ post.created_at.strftime('%B %d, %Y') }}
        </p>
        <p class="card-text mb-2">
          {{ post.content|striptags|truncate(150, True, '...') }}
        </p>
        <a href="{{ url_for('blog_bp.view_post', slug=post.slug) }}" class="btn btn-primary">Read More →</a>
      </div>
      {% if not loop.last %}
      <hr class="my-3">
      {% endif %}
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <!-- System Monitoring -->
  <div class="card mb-4">
    <div class="card-header">📊 System Monitoring</div>
    <div class="card-body text-center">
      <p>Monitor real-time sensor data for water quality, temperature, and environmental conditions.</p>
      <a href="{{ url_for('sensors') }}" class="btn btn-primary btn-lg">View Sensor Dashboard</a>
    </div>
  </div>

</div>

{% endblock %}